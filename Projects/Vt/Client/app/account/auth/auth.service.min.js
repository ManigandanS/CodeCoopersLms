angular.module("vt.account").service("authenticationSvc",["$resource","$http","$q","$window","appService",function(n,t,i,r,u){function o(t){var o=n(u.baseUrl+"Signin"),e=i.defer();return o.save(t,function(n){return n.IsSuccess?(f=n.Data,r.sessionStorage.setItem("user",JSON.stringify(n.Data)),e.resolve(n)):e.reject(n)},function(n){return e.reject(n)}),e.promise}function s(t){var e=i.defer(),o=n(u.baseUrl+"signup");return o.save(t,function(n){return n.IsSuccess?(f=n.Data,r.sessionStorage.setItem("user",JSON.stringify(n.Data)),e.resolve(n)):e.reject(n)},function(n){return e.reject(n)}),e.promise}function h(){f=null;r.sessionStorage.removeItem("user")}function e(t){var r=i.defer(),e=n(u.baseUrl+"/authorization"),o={id:f.Id,route:t};return e.save(o,function(n){var t=n.IsSuccess;return t?r.resolve(t):r.reject({authenticated:!0,authorized:!1,defaultRoute:f.defaultRoute})},function(n){return r.reject(n)}),r.promise}function c(){return f==null&&r.sessionStorage.user&&(f=JSON.parse(r.sessionStorage.getItem("user"))),f}function l(n){if(f){var t=e(n);return t?(t.then(function(n){console.log(n)},function(n){console.log(n)}),i.when(t)):i.reject({authenticated:!0,authorized:!1})}return i.reject({authenticated:!1})}function a(){return f!=null&&f.Name.length>0&&f.Id.length>0}function v(){return f!=null?f.Id+":"+f.Token:""}function y(){r.sessionStorage.user&&(f=JSON.parse(r.sessionStorage.getItem("user")))}var f;return y(),{signin:o,signout:h,getUserInfo:c,checkAccess:e,signup:s,authorize:l,isSignedIn:a,getToken:v}}]);angular.module("vt.account").factory("sessionInjector",["$window",function(n){return{request:function(t){var i,r;return n.sessionStorage.user&&(i=JSON.parse(n.sessionStorage.getItem("user")),i&&i.Id&&i.Token?(r=window.btoa(i.Id+":"+i.Token),t.headers["x-session-token"]=r):t.headers["x-session-token"]=""),t}}}]);
//# sourceMappingURL=auth.service.min.js.map
