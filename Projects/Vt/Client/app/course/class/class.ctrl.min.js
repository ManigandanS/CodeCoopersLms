angular.module("vt.course").controller("classController",["$rootScope","$scope","$routeParams","$location","classService",function(n,t,i,r,u){function f(){var n=i.id;u.isUnlocked(n).then(function(i){i.IsSuccess?u.get(n).then(function(n){console.log(n);n.IsSuccess&&(t.content=n.Data,t.content.Type===2?t.loadQuiz():t.content.VideoUrl&&setTimeout(function(){wistiaEmbed=Wistia.embed(t.content.VideoUrl,{videoFoam:!0})},500))}):(alert("The requested content is not unlocked yet."),r.path("/"))},function(n){console.log(n);alert(n.Message);r.path("/")})}t.content={Type:0};t.showVideo=!0;f();t.gotoNext=function(){t.content.Level.Count==t.content.No?alert("End of the level "+t.content.Level.Name):u.getId({contentNo:t.content.No+1,levelNo:t.content.Level.No}).then(function(n){u.isUnlocked(n.Data).then(function(i){i.IsSuccess?r.path("/class-detail/"+n.Data):(alert("Your requested content is locked. It is a paid content and is accessible only if you completed your current quiz. In case you completed the quiz, please retake it."),t.loadQuiz(),t.showVideo=!1)})},function(n){console.log(n)})};t.gotoPrevious=function(){t.content.No==1?alert("no previous"):u.getId({contentNo:t.content.No-1,levelNo:t.content.Level.No}).then(function(n){console.log(n.Data);r.path("/class-detail/"+n.Data)},function(n){console.log(n)})};t.loadQuiz=function(){u.loadQuiz(t.content.Id).then(function(n){t.quiz=n.Data},function(n){alert("Error occurred."+n.Data)})};var e=function(){for(var r,i,u=[],n=0;n<t.quiz.Questions.length;n++){if(r=null,t.quiz.Questions[n].Type===1){for(i=0;i<t.quiz.Questions[n].Options.length;i++)if(t.quiz.Questions[n].Options[i].Id===t.quiz.Questions[n].IsSelected){r={QuestionId:t.quiz.Questions[n].Id,AnswerText:t.quiz.Questions[n].Options[i].Name};break}}else r={QuestionId:t.quiz.Questions[n].Id,AnswerText:t.quiz.Questions[n].IsSelected};u.push(r)}return{ContentId:t.quiz.ContentId,QuizHistoryId:t.quiz.Id,Answers:u}};t.submitQuizAnswers=function(){var n=e();console.log(n);u.submitAnswers(n).then(function(n){n.IsSuccess?r.path("/class-detail/"+n.Data.ContentId):(alert(n.Message),n.Data==="Assignment"&&r.path("/"))})};t.gotoDetails=function(n){r.path("/class-detail/"+n.Id)}}]);
//# sourceMappingURL=class.ctrl.min.js.map
